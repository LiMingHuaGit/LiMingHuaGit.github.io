<!DOCTYPE html><html lang="ch"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="description" content="智能码分配 从缓存&#x2F;db中获取渠道码信息，判断是按时段还åå是按ip分配还是随机分配  按IP wlid:user:xid 存放 externalUserRelatedId2. 先判断当前用户的xid是否已经绑定某客户，若客户已添加过员工，则返回该员工的二维码。3. 若是已流失的企业客户channel:wlid:code:xid 存放RedisLiveCode4. 看是否分配过，如果渠道"><meta property="og:type" content="article"><meta property="og:title" content="核心模块开发思路"><meta property="og:url" content="https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/index.html"><meta property="og:site_name" content="李明华的博客"><meta property="og:description" content="智能码分配 从缓存&#x2F;db中获取渠道码信息，判断是按时段还åå是按ip分配还是随机分配  按IP wlid:user:xid 存放 externalUserRelatedId2. 先判断当前用户的xid是否已经绑定某客户，若客户已添加过员工，则返回该员工的二维码。3. 若是已流失的企业客户channel:wlid:code:xid 存放RedisLiveCode4. 看是否分配过，如果渠道"><meta property="og:locale"><meta property="article:published_time" content="2024-04-28T08:39:48.000Z"><meta property="article:modified_time" content="2025-01-08T05:50:57.149Z"><meta property="article:author" content="李明华"><meta property="article:tag" content="life"><meta name="twitter:card" content="summary"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>核心模块开发思路</title><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="李明华的博客" type="application/atom+xml"></head><body class="max-width mx-auto px3 RTL"><div id="header-post"><a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" aria-label="Top" onclick='$("html, body").animate({scrollTop:0},"fast")' style="display:none"><i class="fa-solid fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archives/">Writing</a></li><li><a href="/2020/04/17/aboutMe/">About</a></li><li><a href="/tags">tags</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" aria-label="Previous post" href="/2024/04/29/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB-scrm%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" aria-label="Next post" href="/2024/04/28/%E5%9B%BE%E7%89%87%E7%94%9F%E6%88%90/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" aria-label="Back to top" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-share" class="info" style="display:none">Share post</span></span><br><div id="share" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&text=核心模块开发思路"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&is_video=false&description=核心模块开发思路"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=核心模块开发思路&body=Check out this article: https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/"><i class="fa-solid fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-digg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&name=核心模块开发思路&description="><i class="fab fa-tumblr" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&t=核心模块开发思路"><i class="fab fa-hacker-news" aria-hidden="true"></i></a></li></ul></div><div id="toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%99%BA%E8%83%BD%E7%A0%81"><span class="toc-number">1.</span> <span class="toc-text">智能码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%85%8D"><span class="toc-number">1.1.</span> <span class="toc-text">分配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89IP"><span class="toc-number">1.1.1.</span> <span class="toc-text">按IP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BD%92%E5%9B%A0"><span class="toc-number">2.</span> <span class="toc-text">归因</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E7%9B%91%E6%B5%8B"><span class="toc-number">2.1.</span> <span class="toc-text">用户行为监测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#track"><span class="toc-number">2.1.1.</span> <span class="toc-text">track</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#open-track"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">open track</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stay-track"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">stay track</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#find-Expire%EF%BC%88%E5%AE%9A%E6%97%B6%E8%BD%AE%E8%AF%A2%EF%BC%89"><span class="toc-number">2.1.1.3.</span> <span class="toc-text">find Expire（定时轮询）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%88%86%E4%BA%AB%E8%A1%8C%E4%B8%BA"><span class="toc-number">2.1.2.</span> <span class="toc-text">微信分享行为</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#merge"><span class="toc-number">2.2.</span> <span class="toc-text">merge</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E6%89%BE%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.2.1.</span> <span class="toc-text">人找事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E6%89%BE%E4%BA%BA"><span class="toc-number">2.2.2.</span> <span class="toc-text">事件找人</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#auth"><span class="toc-number">2.3.</span> <span class="toc-text">auth</span></a></li></ol></li></ol></div></span></div><div class="content index py4"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle p-name" itemprop="name headline">核心模块开发思路</h1><div class="meta"><span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-name" itemprop="name">李明华</span></span><div class="postdate"><time datetime="2024-04-28T08:39:48.000Z" class="dt-published" itemprop="datePublished">2024-04-28</time> (Updated: <time datetime="2025-01-08T05:50:57.149Z" class="dt-updated" itemprop="dateModified">2025-01-08</time>)</div><div class="article-category"><i class="fa-solid fa-archive"></i> <a class="category-link" href="/categories/%E5%B7%A5%E4%BD%9C/">工作</a></div></div></header><div class="content e-content" itemprop="articleBody"><h1 id="智能码"><a href="#智能码" class="headerlink" title="智能码"></a>智能码</h1><h2 id="分配"><a href="#分配" class="headerlink" title="分配"></a>分配</h2><ol><li>从缓存&#x2F;db中获取渠道码信息，判断是按时段还åå是按ip分配还是随机分配</li></ol><h3 id="按IP"><a href="#按IP" class="headerlink" title="按IP"></a>按IP</h3><blockquote><p><strong>wlid:user:xid</strong> 存放 externalUserRelatedId<br>2. 先判断当前用户的xid是否已经绑定某客户，若客户已添加过员工，则返回该员工的二维码。<br>3. 若是已流失的企业客户<br><strong>channel:wlid:code:xid</strong> 存放RedisLiveCode<br>4. 看是否分配过，如果渠道码信息一致则直接返回，<br>不一致，如果分配过且二维码使用员工匹配，<br>5. 若员工不匹配，<br>** livecode: codeChannelId** 存放RedisLiveCode队列<br>若缓存中可以取到，返回，没有取到则从数据库中拿到码的列表放入缓存中并取得码返回<br>6. 若员工匹配<br>** livecode: codeChannelId:userId**<br>若缓存中可以取到码，将该码存入** channel:wlid:code:xid<strong>，并返回<br>若没有取到，则将渠道中的码全部取出更新缓存</strong> livecode: codeChannelId:userId** 并取得码再存入** channel:wlid:code:xid<strong>后返回<br>7. 若没有分配过，上锁<br>** lock:code:select:xid</strong> RLock锁<br>再获取一遍<strong>channel:wlid:code:xid</strong><br>若取到则和上面步骤一致，看渠道和员工一不一致并获取返回<br>8. 若未取到，先获取** special:code:channel:ip:codeChannelId<strong>，若未取到则从数据库中读取并存入缓存<br>** special:code:channel:ip:codeChannelId</strong> 存放 Map&lt;IpRegionCodeList, componentRuleId&gt; map<br>** ip:region:ipAddress** 存放IpAddressDto<br>** channel:user:pool: componentRuleId** 存放员工id<br><strong>special:channel:codeId:codeId</strong> 存放region<br>9. 遍历获取到的map，IpRegionCodeList中存在当前ip，则根据componentRuleId从** channel:user:pool: componentRuleId<strong>中取出对应员工，若没有缓存，则从数据库中查出后放入缓存<br>10. 根据获取到的员工从</strong> livecode: codeChannelId:userId** 取码，取出后同步放入<strong>channel:wlid:code:xid</strong> 和 <strong>special:channel:codeId:codeId</strong>中并返回<br>11. 若map中不存在当前ip，则返回默认员工的码</p></blockquote><p>###随机分配</p><p>生成码时打乱队列即可</p><p>###按时段</p><p>定时任务按时段切换智能码对应员工</p><hr><h1 id="归因"><a href="#归因" class="headerlink" title="归因"></a>归因</h1><h2 id="用户行为监测"><a href="#用户行为监测" class="headerlink" title="用户行为监测"></a>用户行为监测</h2><h3 id="track"><a href="#track" class="headerlink" title="track"></a>track</h3><ol><li>前端请求track</li><li>用户浏览时拦截器种下cookie</li><li>监控用户浏览信息 每5s一次 持续5分钟</li></ol><p>区分用户的行为类型： 打开 or 停留</p><h4 id="open-track"><a href="#open-track" class="headerlink" title="open track"></a>open track</h4><ol><li><p>根据 {xid} 和 {ui} 查找缓存</p></li><li><p>若不存在缓存，查找该cookie是否存在历史事件，若999历史事件绑定了客户，则清除该客户画像的缓存（产生了新画像事件）</p></li><li><p>根据当前用户访问信息构造根事件和子事件并生成缓存</p><blockquote><p>** 缓存及存放内容**<br><strong>key — value</strong><br>website:track:xid — rootEvent的开始结束信息 当前子事件<br>website:track:ui — rootEvent的开始结束信息 当前子事件<br>track:stay:website — 键值对 xid-当前时间 ui-当前时间</p></blockquote></li><li><p>返回生成子事件的ID</p></li></ol><h4 id="stay-track"><a href="#stay-track" class="headerlink" title="stay track"></a>stay track</h4><ol><li>根据xid&#x2F;ui获取website:track缓存</li><li>获取不到则return，如果有责更新时间缓存数据</li></ol><blockquote><p>** 缓存及存放内容**<br>website:track:xid&#x2F;ui rootEvent结束时间<br>track:stay:website — 键值对 xid-当前时间 ui-当前时间</p></blockquote><h4 id="find-Expire（定时轮询）"><a href="#find-Expire（定时轮询）" class="headerlink" title="find Expire（定时轮询）"></a>find Expire（定时轮询）</h4><ol><li>获取<strong>track:stay:website</strong> map</li><li>遍历map<ol start="3"><li>读取value，当前时间-事件发生时间，超过10s没有更新时间，则认为事件过期，进行事件过期处理，否则跳过继续进行监控<ol start="4"><li>根据key中的xid&#x2F;ui寻找<strong>website:track:xid&#x2F;ui</strong> 获取事件的详细信息<ol start="5"><li>若详细信息为空，则清除缓存</li><li>若不为空则根据缓存中信息更新数据库中事件的持续时长</li></ol></li><li>如果当前xid没有分配过活码，清除缓存</li><li>判断事件是否活归因到活码加人，如果是，更新事件的用户信息，清除用户画像缓存</li><li>如果没有归因到活码加人，但识别到关联的历史客户，同样更新本次访问产生的所有事件的信息</li><li>判断是否有<strong>track:stay:doubleexpire:eventID</strong>事件过期缓存<ol><li>没有就设置（只有xid&#x2F;ui中的一个过期），有的话（两个都过期）则发送浏览通知</li></ol></li></ol></li></ol></li></ol><h3 id="微信分享行为"><a href="#微信分享行为" class="headerlink" title="微信分享行为"></a>微信分享行为</h3><h2 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h2><h3 id="人找事件"><a href="#人找事件" class="headerlink" title="人找事件"></a>人找事件</h3><ol><li>加好友回调时，发送到TOPIC, “ATT.USERTOEVENT.SH2”<br><strong>HistoryAttributiveDTO</strong>：存放state等加好友回调信息</li><li>优先判断codeid+unionid的微信环境的归因，再判断是否能只根据codeid来进行归因<blockquote><p>** 缓存及存放内容**<br>** attributive:history:unionid:state**<br>** attributive:history:state**<br>存放内容为<strong>HistoryRedisDTO</strong>：存放码分配时的情况<br>如果在缓存中找不到，因为history产生会早于加人事件，则判断这人不用归因</p></blockquote></li><li>根据获取到的码当时的分配情况，将客户id写入分配记录，并删除上面state的缓存</li><li>根据分配时的target归因到具体场景，寻找当时的事件。</li><li>若为资料库场景，根据资料id和unionid找到事件。<blockquote><p>** 缓存及存放内容**<br>** attributive:event:materialid:unionid** 存放eventLogId</p><ol start="6"><li>将客户绑定到所有关联事件</li><li>若事件发生比加好友时间早，则将好友关系绑定到该事件，否则return</li><li>若为web场景，根据xid&#x2F;ui查找<br>** 缓存及存放内容**<br>** attributive:event:xid** 存放eventLogId<br>** attributive:event:ui**<br>若找不到，可能是没有cookie，使用ua过期了的，判断是否能从relation中获得事件，如果从relation获取到了事件，将客户绑定到所有关联事件<br>并判断是否需要将好友关系归因到事件，如果归因成果的话删除上面缓存</li><li>如果还没找到，则将followUser归因后的信息放入redis中，有xid和ui两种key，并将<strong>HistoryRedisDTO</strong>设置为需要等待合并<br>** 缓存及存放内容**<br>** attributive:user:xid ** 存放HistoryMergeDTO<br>** attributive:event:ui**</li></ol></blockquote></li><li>如果不需要等待事件找到人，直接更改用户状态</li></ol><h3 id="事件找人"><a href="#事件找人" class="headerlink" title="事件找人"></a>事件找人</h3><ol><li>产生web访问时、资料浏览时，创建eventLog，并发送到TOPIC “ATT.EVENTTOUSER.SH2” eventLogId</li><li>根据eventLog中的xid 获取缓存<blockquote><p>** 缓存及存放内容**<br>** attributive:user:xid **<br>** attributive:event:ui**<br>找到缓存后将相关事件绑定到人，并删除上面缓存<br>没找到的话则将事件放入缓存等待加人后合并<br>** 缓存及存放内容**<br>** attributive:event:xid** 存放eventLogId<br>** attributive:event:ui**</p></blockquote></li></ol><hr><p>#资料库</p><h2 id="auth"><a href="#auth" class="headerlink" title="auth"></a>auth</h2></div></article><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">Home</a></li><li><a href="/archives/">Writing</a></li><li><a href="/2020/04/17/aboutMe/">About</a></li><li><a href="/tags">tags</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%99%BA%E8%83%BD%E7%A0%81"><span class="toc-number">1.</span> <span class="toc-text">智能码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%85%8D"><span class="toc-number">1.1.</span> <span class="toc-text">分配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89IP"><span class="toc-number">1.1.1.</span> <span class="toc-text">按IP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BD%92%E5%9B%A0"><span class="toc-number">2.</span> <span class="toc-text">归因</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E7%9B%91%E6%B5%8B"><span class="toc-number">2.1.</span> <span class="toc-text">用户行为监测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#track"><span class="toc-number">2.1.1.</span> <span class="toc-text">track</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#open-track"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">open track</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stay-track"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">stay track</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#find-Expire%EF%BC%88%E5%AE%9A%E6%97%B6%E8%BD%AE%E8%AF%A2%EF%BC%89"><span class="toc-number">2.1.1.3.</span> <span class="toc-text">find Expire（定时轮询）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%88%86%E4%BA%AB%E8%A1%8C%E4%B8%BA"><span class="toc-number">2.1.2.</span> <span class="toc-text">微信分享行为</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#merge"><span class="toc-number">2.2.</span> <span class="toc-text">merge</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E6%89%BE%E4%BA%8B%E4%BB%B6"><span class="toc-number">2.2.1.</span> <span class="toc-text">人找事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E6%89%BE%E4%BA%BA"><span class="toc-number">2.2.2.</span> <span class="toc-text">事件找人</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#auth"><span class="toc-number">2.3.</span> <span class="toc-text">auth</span></a></li></ol></li></ol></div><div id="share-footer" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&text=核心模块开发思路"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&is_video=false&description=核心模块开发思路"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=核心模块开发思路&body=Check out this article: https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&title=核心模块开发思路"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&name=核心模块开发思路&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://liminghuagit.github.io/2024/04/28/%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E6%80%9D%E8%B7%AF/&t=核心模块开发思路"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="menu" class="icon" href="#" onclick='return $("#nav-footer").toggle(),!1'><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a> <a id="toc" class="icon" href="#" onclick='return $("#toc-footer").toggle(),!1'><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick='return $("#share-footer").toggle(),!1'><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2016-2025 李明华</div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archives/">Writing</a></li><li><a href="/2020/04/17/aboutMe/">About</a></li><li><a href="/tags">tags</a></li></ul></nav></div></footer></div><link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload='this.onload=null,this.rel="stylesheet"'><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script><script type="text/javascript">$(function(){$(".highlight table").before('<span class="btn-copy tooltipped tooltipped-sw" aria-label="Copy to clipboard!"><i class="fa-regular fa-clone"></i></span>'),new ClipboardJS(".btn-copy",{text:function(e){return Array.from(e.nextElementSibling.querySelectorAll(".code")).reduce((e,t)=>e+t.innerText+"\n","")}}).on("success",function(e){e.trigger.setAttribute("aria-label","Copied!"),e.clearSelection()})})</script><script src="/js/main.js"></script></body></html>