<!DOCTYPE html><html lang="ch"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="description" content="macos下载安装下载链接：https:&#x2F;&#x2F;www.mongodb.com&#x2F;try&#x2F;download&#x2F;community  进入 &#x2F;usr&#x2F;local  1cd &#x2F;usr&#x2F;local   下载  1sudo curl -O https:&#x2F;&#x2F;fastdl.mongodb.org&#x2F;osx&#x2F;mongodb-osx-ssl-x86_64-4.0.9.tgz   解压  1sudo ta"><meta property="og:type" content="article"><meta property="og:title" content="mongodb总结"><meta property="og:url" content="https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/index.html"><meta property="og:site_name" content="李明华的博客"><meta property="og:description" content="macos下载安装下载链接：https:&#x2F;&#x2F;www.mongodb.com&#x2F;try&#x2F;download&#x2F;community  进入 &#x2F;usr&#x2F;local  1cd &#x2F;usr&#x2F;local   下载  1sudo curl -O https:&#x2F;&#x2F;fastdl.mongodb.org&#x2F;osx&#x2F;mongodb-osx-ssl-x86_64-4.0.9.tgz   解压  1sudo ta"><meta property="og:locale"><meta property="og:image" content="https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/1.jpg"><meta property="article:published_time" content="2021-05-26T05:57:16.000Z"><meta property="article:modified_time" content="2024-01-31T03:18:13.177Z"><meta property="article:author" content="李明华"><meta property="article:tag" content="数据库"><meta property="article:tag" content="mongodb"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/1.jpg"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>mongodb总结</title><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="李明华的博客" type="application/atom+xml"></head><body class="max-width mx-auto px3 RTL"><div id="header-post"><a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" aria-label="Top" onclick='$("html, body").animate({scrollTop:0},"fast")' style="display:none"><i class="fa-solid fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archives/">Writing</a></li><li><a href="/2020/04/17/aboutMe/">About</a></li><li><a href="/tags">tags</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" aria-label="Previous post" href="/2021/05/26/nosql/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" aria-label="Next post" href="/2021/05/26/%E6%8A%A5%E8%A1%A8%E6%95%B0%E4%BB%93%E5%AF%B9%E6%8E%A5%E6%96%B9%E6%A1%88/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" aria-label="Back to top" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-share" class="info" style="display:none">Share post</span></span><br><div id="share" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&text=mongodb总结"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&is_video=false&description=mongodb总结"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=mongodb总结&body=Check out this article: https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/"><i class="fa-solid fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-digg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&name=mongodb总结&description="><i class="fab fa-tumblr" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&t=mongodb总结"><i class="fab fa-hacker-news" aria-hidden="true"></i></a></li></ul></div><div id="toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#macos%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">macos下载安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AF%E8%AF%AD"><span class="toc-number">2.1.</span> <span class="toc-text">术语</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BSON"><span class="toc-number">2.2.</span> <span class="toc-text">BSON</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8EJSON%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.2.1.</span> <span class="toc-text">与JSON的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93-db"><span class="toc-number">2.3.</span> <span class="toc-text">数据库 db</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88-collection"><span class="toc-number">2.4.</span> <span class="toc-text">集合 collection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%A1%A3-document"><span class="toc-number">2.5.</span> <span class="toc-text">文档 document</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3"><span class="toc-number">2.5.1.</span> <span class="toc-text">插入文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3"><span class="toc-number">2.5.2.</span> <span class="toc-text">删除文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%96%87%E6%A1%A3"><span class="toc-number">2.5.3.</span> <span class="toc-text">更新文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3"><span class="toc-number">2.5.4.</span> <span class="toc-text">查询文档</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Springboot-MongoTemplate"><span class="toc-number">3.</span> <span class="toc-text">Springboot MongoTemplate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">4.</span> <span class="toc-text">新建索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%9E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">5.</span> <span class="toc-text">重型安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E7%AE%A1%E8%B4%A6%E6%88%B7"><span class="toc-number">5.1.</span> <span class="toc-text">超管账户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%99%E7%A8%8B%E5%8F%82%E8%80%83"><span class="toc-number">5.2.</span> <span class="toc-text">教程参考</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E7%9B%AE%E5%BD%95"><span class="toc-number">5.3.</span> <span class="toc-text">相关目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.4.</span> <span class="toc-text">配置文件</span></a></li></ol></li></ol></div></span></div><div class="content index py4"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle p-name" itemprop="name headline">mongodb总结</h1><div class="meta"><span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-name" itemprop="name">李明华</span></span><div class="postdate"><time datetime="2021-05-26T05:57:16.000Z" class="dt-published" itemprop="datePublished">2021-05-26</time> (Updated: <time datetime="2024-01-31T03:18:13.177Z" class="dt-updated" itemprop="dateModified">2024-01-31</time>)</div><div class="article-category"><i class="fa-solid fa-archive"></i> <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></div><div class="article-tag"><i class="fa-solid fa-tag"></i> <a class="p-category" href="/tags/mongodb/" rel="tag">mongodb</a>, <a class="p-category" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></div></div></header><div class="content e-content" itemprop="articleBody"><h2 id="macos下载安装"><a href="#macos下载安装" class="headerlink" title="macos下载安装"></a>macos下载安装</h2><p>下载链接：<a target="_blank" rel="noopener" href="https://www.mongodb.com/try/download/community">https://www.mongodb.com/try/download/community</a></p><ul><li>进入 &#x2F;usr&#x2F;local</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br></pre></td></tr></table></figure><ul><li>下载</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -O https://fastdl.mongodb.org/osx/mongodb-osx-ssl-x86_64-4.0.9.tgz</span><br></pre></td></tr></table></figure><ul><li>解压</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf mongodb-osx-ssl-x86_64-4.0.9.tgz</span><br></pre></td></tr></table></figure><ul><li>重命名为 mongodb 目录</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv mongodb-osx-x86_64-4.0.9/ mongodb</span><br></pre></td></tr></table></figure><p>安装完成后，我们可以把 MongoDB 的二进制命令文件目录（安装目录&#x2F;bin）添加到 PATH 路径中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/local/mongodb/bin:$PATH</span><br></pre></td></tr></table></figure><p>创建日志及数据存放的目录：</p><ul><li>数据存放路径：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /usr/local/var/mongodb</span><br></pre></td></tr></table></figure><ul><li>日志文件路径：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /usr/local/var/log/mongodb</span><br></pre></td></tr></table></figure><ul><li>确保当前用户对以上两个目录有读写的权限：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chown liminghua /usr/local/var/mongodb</span><br><span class="line">sudo chown liminghua /usr/local/var/log/mongodb</span><br></pre></td></tr></table></figure><p>以上 liminghua 是我电脑上的用户，你这边需要根据你当前对用户名来修改。</p><p>接下来使用以下命令在后台启动 mongodb：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath /usr/local/var/mongodb --logpath /usr/local/var/log/mongodb/mongo.log --fork</span><br><span class="line">--dbpath 设置数据存放目录</span><br><span class="line">--logpath 设置日志存放目录</span><br><span class="line">--fork 在后台运行</span><br></pre></td></tr></table></figure><p>如果不想在后端运行，而是在控制台上查看运行过程可以直接设置配置文件启动：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mongod --config /usr/local/etc/mongod.conf</span><br><span class="line">查看 mongod 服务是否启动：</span><br><span class="line"></span><br><span class="line">ps aux | grep -v grep | grep mongod</span><br></pre></td></tr></table></figure><p>启动后可以使用 mongo 命令打开一个终端</p><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><h3 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h3><table><thead><tr><th>SQL术语&#x2F;概念</th><th>MongoDB术语&#x2F;概念</th><th>解释&#x2F;说明</th></tr></thead><tbody><tr><td>database</td><td>database</td><td>数据库</td></tr><tr><td>table</td><td>collection</td><td>数据库表&#x2F;集合</td></tr><tr><td>row</td><td>document</td><td>数据记录行&#x2F;文档</td></tr><tr><td>column</td><td>field</td><td>数据字段&#x2F;域</td></tr><tr><td>index</td><td>index</td><td>索引</td></tr><tr><td>table joins</td><td></td><td>表连接,MongoDB不支持</td></tr><tr><td>primary key</td><td>primary key</td><td>主键,MongoDB自动将_id字段设置为主键</td></tr></tbody></table><p><img src="/2021/05/26/mongodb%E6%80%BB%E7%BB%93/1.jpg"></p><h3 id="BSON"><a href="#BSON" class="headerlink" title="BSON"></a>BSON</h3><p>BSON是一种类JSON的一种二进制形式的存储格式，简称Binary JSON，它和JSON一样，支持内嵌的文档对象和数组对象，但是BSON有JSON没有的一些数据类型，如<strong>Date</strong>和<strong>BinData</strong>类型。<br>BSON可以做为网络数据交换的一种存储形式，这个有点类似于Google的Protocol Buffer，但是BSON是一种schema-less的存储形式，它的优点是灵活性高，但它的缺点是空间利用率不是很理想，<br>BSON有三个特点：<strong>轻量性</strong>、<strong>可遍历性</strong>、<strong>高效性</strong>。</p><h4 id="与JSON的区别"><a href="#与JSON的区别" class="headerlink" title="与JSON的区别"></a>与JSON的区别</h4><p>BSON是由10gen（mongodb开发公司）开发的一个数据格式，目前主要用于MongoDB中，是mongodb的数据存储格式。BSON基于JSON格式，选择JSON进行改造的原因主要是JSON的通用性及JSON的schemaless的特性。<br>BSON主要会实现以下三点目标：</p><ol><li>更快的遍历速度<ul><li>对JSON格式来说，太大的JSON结构会导致数据遍历非常慢。在JSON中，要跳过一个文档进行数据读取，需要对此文档进行扫描才行，需要进行麻烦的数据结构匹配，比如括号的匹配，而BSON对JSON的一大改进就是，它会将JSON的每一个元素的长度存在元素的头部，这样你只需要读取到元素长度就能直接seek到指定的点上进行读取了。</li></ul></li><li>操作更简易<ul><li>对JSON来说，数据存储是无类型的，比如你要修改基本一个值，从9到10，由于从一个字符变成了两个，所以可能其后面的所有内容都需要往后移一位才可以。而使用BSON，你可以指定这个列为数字列，那么无论数字从9长到10还是100，我们都只是在存储数字的那一位上进行修改，不会导致数据总长变大。当然，在MongoDB中，如果数字从整形增大到长整型，还是会导致数据总长变大的。</li></ul></li><li>增加了额外的数据类型<ul><li>JSON是一个很方便的数据交换格式，但是其类型比较有限。BSON在其基础上增加了“byte array”数据类型。这使得二进制的存储不再需要先base64转换后再存成JSON。大大减少了计算开销和数据大小。<br>但是，在有的时候， BSON相对JSON来说也并没有空间上的优势，比如对{“field”:7}，在JSON的存储上7只使用了一个字节，而如果用BSON，那就是至少4个字节（32位）<br>目前在10gen的努力下，BSON已经有了针对多种语言的编码解码包。并且都是Apache 2 license下开源的。并且还在随着MongoDB进一步地发展。</li></ul></li></ol><h3 id="数据库-db"><a href="#数据库-db" class="headerlink" title="数据库 db"></a>数据库 db</h3><p>一个mongodb中可以建立多个数据库。</p><p>MongoDB的默认数据库为”db”，该数据库存储在data目录中。</p><p>MongoDB的单个实例可以容纳多个独立的数据库，每一个都有自己的集合和权限，不同的数据库也放置在不同的文件中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">use xxx //切换至数据库，没有则创建</span><br><span class="line"></span><br><span class="line">db.xxx.insert(&#123;&quot;fuck&quot;:&quot;u&quot;&#125;) //插入数据，插入文档数据时，若没有集合，则会自动创建和数据库同名的集合</span><br><span class="line"></span><br><span class="line">show dbs //展示数据库列表(不显示空数据库)</span><br><span class="line"></span><br><span class="line">db.dropDatabase() //删除当前使用的数据库</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="集合-collection"><a href="#集合-collection" class="headerlink" title="集合 collection"></a>集合 collection</h3><p>集合就是 MongoDB 文档组，类似于 RDBMS （关系数据库管理系统：Relational Database Management System)中的表格。</p><p>集合存在于数据库中，集合没有固定的结构，这意味着你在对集合可以插入不同格式和类型的数据，但通常情况下我们插入集合的数据都会有一定的关联性。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">db.createCollection(name, options) //创建集合，options可选参数, 指定有关内存大小及索引的选项</span><br><span class="line"></span><br><span class="line">//创建固定集合 mycol，整个集合空间大小 6142800 B, 文档最大个数为 10000 个</span><br><span class="line">db.createCollection(&quot;mycol&quot;, &#123; capped : true, autoIndexId : true, size : </span><br><span class="line">   6142800, max : 10000 &#125; ) </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>options参数：</p><table><thead><tr><th>字段</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>capped</td><td>布尔</td><td>（可选）如果为 true，则创建固定集合。固定集合是指有着固定大小的集合，当达到最大值时，它会自动覆盖最早的文档。当该值为 true 时，必须指定 size 参数。</td></tr><tr><td>size</td><td>数值</td><td>（可选）为固定集合指定一个最大值，即字节数。如果 capped 为 true，也需要指定该字段。</td></tr><tr><td>max</td><td>数值</td><td>（可选）指定固定集合中包含文档的最大数量。</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">show collections/show tables //查看集合</span><br><span class="line"></span><br><span class="line">db.xxx.drop() //删除集合xxx</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="文档-document"><a href="#文档-document" class="headerlink" title="文档 document"></a>文档 document</h3><p>文档是一组键值(key-value)对(即 BSON)。MongoDB 的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别，也是 MongoDB 非常突出的特点。</p><h4 id="插入文档"><a href="#插入文档" class="headerlink" title="插入文档"></a>插入文档</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//插入文档</span><br><span class="line"></span><br><span class="line">//insert(): 若插入的数据主键已经存在，则会抛 org.springframework.dao.DuplicateKeyException 异常，提示主键重复，不保存当前数据。</span><br><span class="line">db.COLLECTION_NAME.insert(document)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>db.collection.insertOne() 用于向集合插入一个新文档，语法格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">db.collection.insertOne(</span><br><span class="line">   &lt;document&gt;,</span><br><span class="line">   &#123;</span><br><span class="line">      writeConcern: &lt;document&gt;</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>db.collection.insertMany() 用于向集合插入一个多个文档，语法格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.collection.insertMany(</span><br><span class="line">   [ &lt;document 1&gt; , &lt;document 2&gt;, ... ],</span><br><span class="line">   &#123;</span><br><span class="line">      writeConcern: &lt;document&gt;,</span><br><span class="line">      ordered: &lt;boolean&gt;</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>document：要写入的文档。</li><li>writeConcern：写入策略，默认为 1，即要求确认写操作，0 是不要求。</li><li>ordered：指定是否按顺序写入，默认 true，按顺序写入。</li></ul><p>也可以将数据定义为一个变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">document=(&#123;title: &#x27;MongoDB 教程&#x27;, </span><br><span class="line">    description: &#x27;MongoDB 是一个 Nosql 数据库&#x27;,</span><br><span class="line">    by: &#x27;菜鸟教程&#x27;,</span><br><span class="line">    url: &#x27;http://www.runoob.com&#x27;,</span><br><span class="line">    tags: [&#x27;mongodb&#x27;, &#x27;database&#x27;, &#x27;NoSQL&#x27;],</span><br><span class="line">    likes: 100</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">db.col.insert(document)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">db.collection.deleteOne() </span><br><span class="line"></span><br><span class="line">db.collection.deleteMany()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 切换到 test 数据库</span><br><span class="line">use test</span><br><span class="line"> </span><br><span class="line"># 导入数据到 inventory 集合</span><br><span class="line">db.inventory.insertMany( [</span><br><span class="line">   &#123; item: &quot;journal&quot;, qty: 25, size: &#123; h: 14, w: 21, uom: &quot;cm&quot; &#125;, status: &quot;A&quot; &#125;,</span><br><span class="line">   &#123; item: &quot;notebook&quot;, qty: 50, size: &#123; h: 8.5, w: 11, uom: &quot;in&quot; &#125;, status: &quot;P&quot; &#125;,</span><br><span class="line">   &#123; item: &quot;paper&quot;, qty: 100, size: &#123; h: 8.5, w: 11, uom: &quot;in&quot; &#125;, status: &quot;D&quot; &#125;,</span><br><span class="line">   &#123; item: &quot;planner&quot;, qty: 75, size: &#123; h: 22.85, w: 30, uom: &quot;cm&quot; &#125;, status: &quot;D&quot; &#125;,</span><br><span class="line">   &#123; item: &quot;postcard&quot;, qty: 45, size: &#123; h: 10, w: 15.25, uom: &quot;cm&quot; &#125;, status: &quot;A&quot; &#125;,</span><br><span class="line">] );</span><br><span class="line"></span><br><span class="line">//若要从集合中删除所有文档，请将空筛选文档 &#123;&#125; 传递给 db.collection.deleteMany() 方法。</span><br><span class="line">db.inventory.deleteMany(&#123;&#125;)</span><br><span class="line"></span><br><span class="line">//删除与条件匹配的所有文档</span><br><span class="line">db.inventory.deleteMany(&#123; status : &quot;A&quot; &#125;)</span><br><span class="line"></span><br><span class="line">//只删除一个与条件匹配的文档</span><br><span class="line">db.inventory.deleteOne( &#123; status: &quot;D&quot; &#125; )</span><br></pre></td></tr></table></figure><h4 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h4><p>update() 方法用于更新已存在的文档</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.collection.update(</span><br><span class="line">   &lt;query&gt;,</span><br><span class="line">   &lt;update&gt;,</span><br><span class="line">   &#123;</span><br><span class="line">     upsert: &lt;boolean&gt;,</span><br><span class="line">     multi: &lt;boolean&gt;,</span><br><span class="line">     writeConcern: &lt;document&gt;</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>参数说明：</p><ul><li>query : update的查询条件，类似sql update查询内where后面的。</li><li>update : update的对象和一些更新的操作符（如$,$inc…）等，也可以理解为sql update查询内set后面的</li><li>upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。</li><li>multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。</li><li>writeConcern :可选，抛出异常的级别。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">db.col.insert(&#123;</span><br><span class="line">    title: &#x27;MongoDB 教程&#x27;, </span><br><span class="line">    description: &#x27;MongoDB 是一个 Nosql 数据库&#x27;,</span><br><span class="line">    by: &#x27;limnghua&#x27;,</span><br><span class="line">    url: &#x27;www.baidum.com&#x27;,</span><br><span class="line">    tags: [&#x27;mongodb&#x27;, &#x27;database&#x27;, &#x27;NoSQL&#x27;],</span><br><span class="line">    likes: 100</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">db.col.update(&#123;&#x27;title&#x27;:&#x27;MongoDB 教程&#x27;&#125;,&#123;$set:&#123;&#x27;title&#x27;:&#x27;MongoDB&#x27;&#125;&#125;)</span><br><span class="line"></span><br><span class="line">//以上语句只会修改第一条发现的文档，如果你要修改多条相同的文档，则需要设置 multi 参数为 true。</span><br><span class="line">db.col.update(&#123;&#x27;title&#x27;:&#x27;MongoDB 教程&#x27;&#125;,&#123;$set:&#123;&#x27;title&#x27;:&#x27;MongoDB&#x27;&#125;&#125;,&#123;multi:true&#125;)</span><br><span class="line"></span><br><span class="line">//整行数据修改，将数据修改为只有url</span><br><span class="line">db.col.update(&#123;&#x27;title&#x27;:&#x27;MongoDB 教程&#x27;&#125;, &#123;&#x27;url&#x27;：&#x27;www.google.com&#x27;&#125;) </span><br></pre></td></tr></table></figure><h4 id="查询文档"><a href="#查询文档" class="headerlink" title="查询文档"></a>查询文档</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">db.collection.find(query, projection)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>参数：</p><ul><li>query ：可选，使用查询操作符指定查询条件</li><li>projection ：可选，使用投影操作符指定返回的键。查询时返回文档中所有键值， 只需省略该参数即可（默认省略）。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//格式化返回，结果更易读</span><br><span class="line">db.col.find().pretty()</span><br><span class="line"></span><br><span class="line">//查询title列内容为2021年浅谈多任务学习的文档</span><br><span class="line">db.url_content.find(&#123;</span><br><span class="line">&quot;title&quot;:&quot;2021年浅谈多任务学习&quot;</span><br><span class="line">&#125;).pretty()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Springboot-MongoTemplate"><a href="#Springboot-MongoTemplate" class="headerlink" title="Springboot MongoTemplate"></a>Springboot MongoTemplate</h2><p>UrlParse</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@Document(collection = &quot;url_content&quot;)</span><br><span class="line">public class UrlParse </span><br></pre></td></tr></table></figure><p>UrlParseDaoImpl</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class UrlParseDaoImpl implements UrlParseDao &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private MongoTemplate mongoTemplate;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public UrlParse save(UrlParse urlParse) &#123;</span><br><span class="line">        if (urlParse != null) &#123;</span><br><span class="line">            return mongoTemplate.save(urlParse);</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public UrlParse getById(String id) &#123;</span><br><span class="line">        Query query = new Query(Criteria.where(&quot;_id&quot;).is(id));</span><br><span class="line">        return mongoTemplate.findOne(query, UrlParse.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void delete(UrlParse urlParse) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void deleteById(String id) &#123;</span><br><span class="line">        UrlParse urlParse = new UrlParse();</span><br><span class="line">        urlParse.setId(id);</span><br><span class="line">        mongoTemplate.remove(urlParse);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="新建索引"><a href="#新建索引" class="headerlink" title="新建索引"></a>新建索引</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.chat_log_progress.createIndex(&#123;&quot;progressId&quot;:1&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="重型安装"><a href="#重型安装" class="headerlink" title="重型安装"></a>重型安装</h2><h3 id="超管账户"><a href="#超管账户" class="headerlink" title="超管账户"></a>超管账户</h3><p>db.createUser({user:”root”,pwd:”xcmgmongo”,roles:[{role:”userAdminAnyDatabase”,db:”admin”},{role:”readWriteAnyDatabase”,db:”admin”}]})</p><h3 id="教程参考"><a href="#教程参考" class="headerlink" title="教程参考"></a>教程参考</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_46825740/article/details/126137014?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-126137014-blog-127940726.235%5Ev38%5Epc_relevant_anti_vip&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=4">https://blog.csdn.net/m0_46825740/article/details/126137014?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-126137014-blog-127940726.235^v38^pc_relevant_anti_vip&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=4</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44799217/article/details/127940726">https://blog.csdn.net/weixin_44799217/article/details/127940726</a></p><h3 id="相关目录"><a href="#相关目录" class="headerlink" title="相关目录"></a>相关目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/mongodb/logs  # 日志目录</span><br><span class="line">mkdir -p /opt/mongodb/db  # 数据库目录</span><br><span class="line"></span><br><span class="line">touch /opt/mongodb/logs/mongodb.log  # 创建日志文件</span><br><span class="line">chmod 777 /opt/mongodb/logs</span><br><span class="line">chmod 777 /opt/mongodb/db</span><br></pre></td></tr></table></figure><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>vim &#x2F;opt&#x2F;mongodb&#x2F;mongodb.conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">port= 27017</span><br><span class="line">dbpath=/opt/mongodb/db  # 指定数据库路径</span><br><span class="line">logpath=/opt/mongodb/logs/mongodb.log # 指定日志文件路径</span><br><span class="line">logappend=true  # 使用追加方式写日志</span><br><span class="line">fork=true  # 以守护进程的方式运行</span><br><span class="line">maxConns=100  # 最大同时连接数</span><br><span class="line">noauth=true  # 不启用验证</span><br><span class="line">journal=true  # 每次写入会记录一条操作日志</span><br><span class="line">storageEngine=wiredTiger # 存储引擎</span><br><span class="line">bind_ip=0.0.0.0 # 服务绑定地址</span><br></pre></td></tr></table></figure><p>启动</p><p>mongod –config &#x2F;opt&#x2F;mongodb&#x2F;mongodb.conf</p></div></article><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">Home</a></li><li><a href="/archives/">Writing</a></li><li><a href="/2020/04/17/aboutMe/">About</a></li><li><a href="/tags">tags</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#macos%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">macos下载安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AF%E8%AF%AD"><span class="toc-number">2.1.</span> <span class="toc-text">术语</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BSON"><span class="toc-number">2.2.</span> <span class="toc-text">BSON</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8EJSON%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.2.1.</span> <span class="toc-text">与JSON的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93-db"><span class="toc-number">2.3.</span> <span class="toc-text">数据库 db</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88-collection"><span class="toc-number">2.4.</span> <span class="toc-text">集合 collection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%A1%A3-document"><span class="toc-number">2.5.</span> <span class="toc-text">文档 document</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3"><span class="toc-number">2.5.1.</span> <span class="toc-text">插入文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3"><span class="toc-number">2.5.2.</span> <span class="toc-text">删除文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%96%87%E6%A1%A3"><span class="toc-number">2.5.3.</span> <span class="toc-text">更新文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3"><span class="toc-number">2.5.4.</span> <span class="toc-text">查询文档</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Springboot-MongoTemplate"><span class="toc-number">3.</span> <span class="toc-text">Springboot MongoTemplate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">4.</span> <span class="toc-text">新建索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%9E%8B%E5%AE%89%E8%A3%85"><span class="toc-number">5.</span> <span class="toc-text">重型安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E7%AE%A1%E8%B4%A6%E6%88%B7"><span class="toc-number">5.1.</span> <span class="toc-text">超管账户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%99%E7%A8%8B%E5%8F%82%E8%80%83"><span class="toc-number">5.2.</span> <span class="toc-text">教程参考</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E7%9B%AE%E5%BD%95"><span class="toc-number">5.3.</span> <span class="toc-text">相关目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.4.</span> <span class="toc-text">配置文件</span></a></li></ol></li></ol></div><div id="share-footer" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&text=mongodb总结"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&is_video=false&description=mongodb总结"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=mongodb总结&body=Check out this article: https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&title=mongodb总结"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&name=mongodb总结&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://liminghuagit.github.io/2021/05/26/mongodb%E6%80%BB%E7%BB%93/&t=mongodb总结"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="menu" class="icon" href="#" onclick='return $("#nav-footer").toggle(),!1'><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a> <a id="toc" class="icon" href="#" onclick='return $("#toc-footer").toggle(),!1'><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick='return $("#share-footer").toggle(),!1'><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2016-2025 李明华</div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archives/">Writing</a></li><li><a href="/2020/04/17/aboutMe/">About</a></li><li><a href="/tags">tags</a></li></ul></nav></div></footer></div><link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload='this.onload=null,this.rel="stylesheet"'><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script><script type="text/javascript">$(function(){$(".highlight table").before('<span class="btn-copy tooltipped tooltipped-sw" aria-label="Copy to clipboard!"><i class="fa-regular fa-clone"></i></span>'),new ClipboardJS(".btn-copy",{text:function(e){return Array.from(e.nextElementSibling.querySelectorAll(".code")).reduce((e,t)=>e+t.innerText+"\n","")}}).on("success",function(e){e.trigger.setAttribute("aria-label","Copied!"),e.clearSelection()})})</script><script src="/js/main.js"></script></body></html>